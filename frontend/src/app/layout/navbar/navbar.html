<div class="w-full h-16 flex items-center justify-between px-6 bg-transparent relative z-50 gap-4">

  <div class="flex items-center gap-3 shrink-0">
    <button class="w-8 h-8 rounded-full bg-black/40 text-white flex items-center justify-center cursor-not-allowed opacity-50">
      <i class="ri-arrow-left-s-line text-xl"></i>
    </button>
    <button class="w-8 h-8 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/60 transition cursor-pointer">
      <i class="ri-arrow-right-s-line text-xl"></i>
    </button>
  </div>

  <div class="flex-1 max-w-[400px] hidden md:block">
    <div class="relative group">
      <span class="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500 group-hover:text-white transition">
        <i class="ri-search-line text-lg"></i>
      </span>
      <input
        type="text"
        (input)="onSearch($event)"
        placeholder="What do you want to play?"
        class="w-full bg-zinc-800/50 hover:bg-zinc-800 text-white rounded-full py-2.5 pl-10 pr-4 outline-none border border-transparent focus:border-white/10 focus:bg-zinc-800 transition placeholder:text-zinc-500 text-sm font-medium"
      >
    </div>
  </div>

  <div class="flex items-center gap-4 shrink-0">

    <button class="hidden lg:block text-sm font-medium text-gray-300 hover:text-white hover:scale-105 transition">
      Premium
    </button>

    <button class="text-sm font-medium text-gray-300 hover:text-white hover:scale-105 transition flex items-center gap-2">
      <i class="ri-download-cloud-2-line"></i> <span class="hidden md:inline">Install App</span>
    </button>

    <div class="relative">
      <div
        (click)="toggleDropdown()"
        class="flex items-center gap-2 bg-black/40 hover:bg-black/60 p-1 pr-3 rounded-full cursor-pointer transition border border-white/5 select-none"
        [class.bg-white_10]="isDropdownOpen()"
      >
        <div class="w-7 h-7 rounded-full bg-gradient-to-br from-accent to-purple-600 flex items-center justify-center text-xs font-bold text-black shadow-lg shadow-accent/20">
          {{ authStore.user()?.firstName?.charAt(0) || 'U' }}
        </div>

        <span class="text-sm font-medium text-zinc-200 hidden md:block">
          {{ authStore.user()?.firstName || "User" }}
        </span>

        <i class="ri-arrow-down-s-fill text-zinc-500 text-xs transition-transform duration-300"
           [class.rotate-180]="isDropdownOpen()">
        </i>
      </div>

      @if (isDropdownOpen()) {
        <div (click)="isDropdownOpen.set(false)" class="fixed inset-0 z-40 cursor-default"></div>

        <div class="absolute right-0 top-full mt-2 w-48 bg-zinc-900/90 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl shadow-black/50 z-50 overflow-hidden py-1 animate-in fade-in slide-in-from-top-2 duration-200">

          <div class="px-4 py-3 border-b border-white/5">
            <p class="text-xs text-zinc-500 font-medium uppercase tracking-wider">Account</p>
            <p class="text-sm text-white truncate">{{ authStore.user()?.email }}</p>
          </div>

          <a routerLink="/settings" (click)="isDropdownOpen.set(false)" class="flex items-center gap-3 px-4 py-3 text-sm text-zinc-300 hover:bg-white/5 hover:text-white transition cursor-pointer">
            <i class="ri-settings-3-line text-lg"></i>
            Settings
          </a>

          @if (isAdmin())  {
            <a routerLink="/admin/songs" (click)="isDropdownOpen.set(false)" class="flex items-center gap-3 px-4 py-3 text-sm text-zinc-300 hover:bg-white/5 hover:text-white transition cursor-pointer">
              <i class="ri-shield-star-line text-lg text-accent"></i>
              Admin Area
            </a>
          }

          <div class="h-px bg-white/5 my-1"></div>

          <button (click)="logout()" class="w-full flex items-center gap-3 px-4 py-3 text-sm text-red-400 hover:bg-red-500/10 hover:text-red-300 transition cursor-pointer text-left">
            <i class="ri-logout-box-r-line text-lg"></i>
            Log Out
          </button>
        </div>
      }
    </div>
  </div>

</div>
